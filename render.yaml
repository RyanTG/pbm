# This file was generated by Render's heroku-import Heroku CLI plugin
# https://www.npmjs.com/package/@renderinc/heroku-import
# Schema documented at https://render.com/docs/yaml-spec
services:
  - type: web # valid values: https://render.com/docs/yaml-spec#type
    name: glowing-dusk-5085
    env: ruby # valid values: https://render.com/docs/yaml-spec#environment
    buildCommand: bin/render-build.sh
    startCommand: bundle exec puma -C config/puma.rb
    plan: standard # optional; defaults to starter
    numInstances: 1
    domains: # custom domains
      - 'pinballmap.com'
      - 'www.pinballmap.com'
    envVars:
      - fromGroup: pbm-env
      - key: DATABASE_URL # Render managed PostgreSQL database
        fromDatabase:
          name: singing-avidly-3904
          property: connectionString
    autoDeploy: false
  - name: notify_super_admins
    type: cron
    env: ruby
    schedule: 0 20 * * 5
    buildCommand: bin/render-build.sh
    startCommand: >
      bundle exec rake notify_super_admins
      && bundle exec rake notify_admins
    envVars:
      - fromGroup: pbm-env
      - key: DATABASE_URL # Render managed PostgreSQL database
        fromDatabase:
          name: singing-avidly-3904
          property: connectionString
    autoDeploy: false
  - name: daily_admin_digests
    type: cron
    env: ruby
    schedule: 0 9 * * *
    buildCommand: bin/render-build.sh
    startCommand: >
      bundle exec rake send_daily_digest_machine_removal_email
      && bundle exec rake send_daily_digest_machine_condition_email
    envVars:
      - fromGroup: pbm-env
      - key: DATABASE_URL # Render managed PostgreSQL database
        fromDatabase:
          name: singing-avidly-3904
          property: connectionString
    autoDeploy: false
envVarGroups:
  - name: pbm-env
databases: # Render PostgreSQL managed database
  - name: singing-avidly-3904
    ipAllowList: [] # only allow internal connections

